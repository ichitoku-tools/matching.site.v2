<!DOCTYPE html>
  <div class="wrapper">
    <h1>施術者マッチング診断</h1>
    <div class="form-group">
      <label>希望エリア:</label>
      <select id="area">
        <option value="">どこでも</option>
        <option value="もみ徳 青波店">もみ徳 青波店</option>
        <option value="もみ徳 花渓店">もみ徳 花渓店</option>
        <option value="もみ徳 雲野店">もみ徳 雲野店</option>
        <option value="もみ徳 響森店">もみ徳 響森店</option>
        <option value="もみ徳 空町店">もみ徳 空町店</option>
        <option value="もみ徳 瑞月店">もみ徳 瑞月店</option>
        <option value="もみ徳 真名店">もみ徳 真名店</option>
        <option value="もみ徳 柚里店">もみ徳 柚里店</option>
        <option value="もみ徳 鷹沢店">もみ徳 鷹沢店</option>
        <option value="もみ徳 朝凪店">もみ徳 朝凪店</option>
      </select>
    </div>
    <div class="form-group">
      <label>希望する施術者の性別:</label>
      <select id="gender">
        <option value="">気にしない</option>
        <option value="男性">男性</option>
        <option value="女性">女性</option>
      </select>
    </div>
    <div class="form-group">
      <label>第一条件（最優先）:</label>
      <select id="priority1">
        <option value="">選択してください</option>
        <option value="コリに的確">コリに的確</option>
        <option value="力強い">力強い</option>
        <option value="動作が楽に">動作が楽に</option>
        <option value="スッキリ">スッキリ</option>
        <option value="丁寧な接客">丁寧な接客</option>
        <option value="ワザがすごい">ワザがすごい</option>
      </select>
    </div>
    <div class="form-group">
      <label>第二条件:</label>
      <select id="priority2">
        <option value="">選択してください</option>
        <option value="コリに的確">コリに的確</option>
        <option value="力強い">力強い</option>
        <option value="動作が楽に">動作が楽に</option>
        <option value="スッキリ">スッキリ</option>
        <option value="丁寧な接客">丁寧な接客</option>
        <option value="ワザがすごい">ワザがすごい</option>
      </select>
    </div>
    <div class="form-group">
      <label>第三条件:</label>
      <select id="priority3">
        <option value="">選択してください</option>
        <option value="コリに的確">コリに的確</option>
        <option value="力強い">力強い</option>
        <option value="動作が楽に">動作が楽に</option>
        <option value="スッキリ">スッキリ</option>
        <option value="丁寧な接客">丁寧な接客</option>
        <option value="ワザがすごい">ワザがすごい</option>
      </select>
    </div>
    <button onclick="matchStaff()">診断する</button>
    <div class="results" id="results"></div>
  </div>
  <script>
    const staffList = JSON.parse(document.getElementById('staff-json').textContent).map(s => {
      s.schedule = {
        "月": s.name === 'Kenta' || s.name === 'Miki' ? "休み" : "10:00〜19:00",
        "火": "10:00〜19:00",
        "水": s.name === 'Souta' ? "休み" : "10:00〜19:00",
        "木": s.name === 'Yui' ? "休み" : "10:00〜19:00",
        "金": "10:00〜19:00",
        "土": s.name === 'Haruka' ? "休み" : "10:00〜19:00",
        "日": "休み"
      };
      return s;
    });

    function matchStaff() {
      const area = document.getElementById('area').value;
      const gender = document.getElementById('gender').value;
      const priority1 = document.getElementById('priority1').value;
      const priority2 = document.getElementById('priority2').value;
      const priority3 = document.getElementById('priority3').value;

      const results = staffList.map(staff => {
        let score = 0;
        if (!area || staff.areas.includes(area)) score += 1;
        if (!gender || staff.gender === gender) score += 1;
        if (priority1 && staff.skills.includes(priority1)) score += 3;
        if (priority2 && staff.skills.includes(priority2)) score += 2;
        if (priority3 && staff.skills.includes(priority3)) score += 1;
        return { ...staff, score };
      }).filter(s => s.score > 0)
        .sort((a, b) => b.score - a.score);

      const resultBox = document.getElementById('results');
      resultBox.innerHTML = results.length ? results.map(s => `
        <div class="card">
          <a href="${s.link}" target="_blank">
            <img src="${s.image}" alt="${s.name}" />
          </a>
          <div>
            <h3>${s.name}</h3>
            <p>性別: ${s.gender}</p>
            <p>出勤店舗: ${s.areas.join(', ')}</p>
            <p>得意項目: ${s.skills.join(', ')}</p>
            <p>出勤スケジュール:</p>
            <ul>
              ${Object.entries(s.schedule).map(([day, time]) => `<li>${day}: ${time}</li>`).join('')}
            </ul>
            <a class="button-link" href="${s.link}" target="_blank">▶ 詳細を見る</a>
          </div>
        </div>
      `).join('') : '<p>一致するスタッフが見つかりませんでした。</p>';
    }
  </script>
</body>
</html>
